<!-- login.html -->
<link rel="stylesheet" href="login.css">

<div class="login-box">
  <h2>Login</h2>
  <form onsubmit="handleLogin(event)">
    <div class="user-box">
      <input type="text" id="username" required>
      <label>Username</label>
    </div>
    <div class="user-box">
      <input type="password" id="password" required>
      <label>Password</label>
    </div>

    <button type="submit">Submit</button>
    <a href="agree.html">Sign up</a>
  </form>
</div>

<script>
function handleLogin(event) {
  event.preventDefault();

  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  const userData = localStorage.getItem(`user_${username}`);
  if (!userData) {
    alert("User not found. Please sign up first.");
    return;
  }

  const user = JSON.parse(userData);

  if (user.password === password) {
    localStorage.setItem("loggedIn", "true");
    localStorage.setItem("currentUser", username);
    window.location.href = "index.html";
  } else {
    alert("Invalid password. Please try again.");
  }
}
</script>
